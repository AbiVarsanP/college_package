{% extends "base.html" %}
{% load static %}
{% block title %} Path Pilot {% endblock %}
{% block hero %}
{% endblock %}
{% block main %}
<style>
    :root {
        --primary: #ffa101;
        --light: #fdfaf5;
        --dark: #343a40;
        --white: #ffffff;
    }

    body {
        background-color: #ffa10150;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        color: var(--dark);
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        scroll-behavior: smooth;
    }

    .breadcrumb {
        background-color: var(--white);
        padding: 0.75rem;
        border-radius: 8px;
        margin-bottom: 1.5rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .breadcrumb-item a {
        color: var(--primary);
        text-decoration: none;
        font-weight: 500;
    }

    .breadcrumb-item a:hover {
        color: #d88901;
        text-decoration: underline;
    }

    .btn-outline-warning {
        border-width: 2px;
        color: white;
        background-color: #ffa101;
    }

    .btn-outline-warning:hover {
        color: #ffffff;
    }

    .accordion-button {
        background-color: #fff8ec;
        color: #000;
    }

    .accordion-button:not(.collapsed) {
        background-color: var(--primary);
        color: #fff;
    }

    .container1 {
        background-color: #ffffff80;
        padding: 20px;
    }

    .accordion-body {
        background-color: #fff;
        border-top: 1px solid #ffc107;
    }

    .list-group-item {
        background-color: #fff;
        border: none;
        border-left: 4px solid var(--primary);
        margin-bottom: 5px;
    }

    h3 {
        font-size: 1.75rem;
        color: var(--primary);
        text-align: center;
        border-bottom: 2px solid var(--primary);
        padding-bottom: 10px;
    }

    h4 {
        margin-top: 1rem;
        font-size: 1.2rem;
    }
</style>

<div class="container my-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'index' %}"><i class="fas fa-home"></i></a></li>
            <li class="breadcrumb-item active"><a href="{% url 'cg' %}">Path Pilot</a></li>
        </ol>
    </nav>

    <div class="container1">
        <div class="text-center mb-4">
            <a href="{% url 'linked_in' %}" class="btn btn-lg btn-outline-warning fw-semibold">
                Career Mapping <i class="fas fa-street-view"></i>
            </a>
        </div>

        <h3>History <i class="fas fa-history"></i></h3>

        {% if ct %}
        <div class="accordion accordion-flush" id="accordionExample">
            {% for i in ct %}
            <div class="accordion-item border rounded mb-3">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed fw-medium" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne{{ i.id }}" aria-expanded="false" aria-controls="collapseOne{{ i.id }}">
                        PP-{{ i.id }}   <strong>@{{ i.goal }}</strong>  on {{ i.created }}
                    </button>
                </h2>
                <div id="collapseOne{{ i.id }}" class="accordion-collapse collapse" data-bs-parent="#accordionExample">
                    <div class="accordion-body">
                        <div id="output{{ i.id }}">
                            {% autoescape off %}
                                {{ i.output }}
                            {% endautoescape %}
                            <div id="credit"></div>
                        </div>
                        <div class="text-end mt-3">
                            <button class="btn btn-outline-success" onclick="printDiv('output{{ i.id }}')">Save to PDF</button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <h3 class="text-center text-danger">No Record Found. Click the above button for Map Generation.</h3>
        {% endif %}
    </div>
</div>

<script>
    function printDiv(divId) {
        document.getElementById("credit").innerHTML = "&copy; Generated by <a href='{% url 'cg' %}'>CloudplusAI [Path Pilot]</a> at ";
        var printContents = document.getElementById(divId).innerHTML;
        var originalContents = document.body.innerHTML;
        document.body.innerHTML = printContents;
        window.print();
        location.reload();
    }
</script>
{% endblock %}